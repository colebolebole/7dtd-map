{
  "version": 3,
  "sources": ["../src/lib/utils.ts", "../src/lib/ui/preset-button.ts", "../src/lib/ui/sync-output.ts", "../src/lib/ui/min-max-inputs.ts", "../src/lib/delayed-renderer.ts", "../src/lib/labels.ts", "../src/lib/label-handler.ts", "../src/lib/url-state.ts", "../src/prefabs.ts"],
  "sourcesContent": ["export function requireNonnull<T>(t: T | undefined | null, errorMessage = () => `Unexpected state: ${String(t)}`): T {\n  if (t == null) throw Error(errorMessage());\n  return t;\n}\n\nexport function strictParseInt(s: string | undefined | null, errorMessage = () => `Unexpected argument: ${String(s)}`): number {\n  const n = parseInt(s ?? \"\");\n  if (isNaN(n)) throw Error(errorMessage());\n  return n;\n}\n\nexport function requireType<T>(\n  o: unknown,\n  t: new (...a: unknown[]) => T,\n  errorMessage = () => `Unexpected type: expected as ${String(t)}, but actual type ${String(o)}`,\n): T {\n  if (o instanceof t) return o;\n  throw Error(errorMessage());\n}\n\nexport function component<T extends HTMLElement = HTMLElement>(id: string | undefined | null, t?: new (...a: unknown[]) => T): T {\n  const i = requireNonnull(id, () => \"Unexpected argument: id is null\");\n  const e = requireNonnull(document.getElementById(i), () => `Element not found: #${i}`);\n  return t ? requireType(e, t) : (e as T);\n}\n\nexport function removeAllChildren(e: HTMLElement): void {\n  while (e.lastChild) e.removeChild(e.lastChild);\n}\n\nexport function humanreadableDistance(d: number): string {\n  if (d < 1000) {\n    return `${d.toString()}m`;\n  }\n  return `${(d / 1000).toFixed(2)}km`;\n}\n\nexport function waitAnimationFrame(): Promise<number> {\n  return new Promise((r) => requestAnimationFrame(r));\n}\n\ninterface EventOffsets {\n  offsetX: number;\n  offsetY: number;\n}\n\nexport async function formatCoords(\n  map: GameMapSize | null,\n  canvas: HTMLCanvasElement,\n  elevation: (coods: GameCoords) => Promise<number | null>,\n  event: EventOffsets | null,\n): Promise<string> {\n  if (!event || !map) return \"E/W: -, N/S: -, Elev: -\";\n\n  const gameCoords = canvasEventToGameCoords(event, map, canvas);\n  if (gameCoords === null) return \"E/W: -, N/S: -, Elev: -\";\n\n  const y = (await elevation(gameCoords)) ?? \"-\";\n  return `E/W: ${gameCoords.x.toString()}, N/S: ${gameCoords.z.toString()}, Elev: ${y.toString()}`;\n}\n\nexport function downloadCanvasPng(fileName: string, canvas: HTMLCanvasElement): void {\n  const a = document.createElement(\"a\");\n  a.download = fileName;\n  a.href = canvas.toDataURL(\"image/png\");\n  a.click();\n}\n\nexport async function sleep(msec: number): Promise<void> {\n  return new Promise((r) => setTimeout(r, msec));\n}\n\nexport function gameMapSize(s: { width: number; height: number }): GameMapSize {\n  return { type: \"game\", ...s };\n}\n\nexport function gameCoords(c: { x: number; z: number }): GameCoords {\n  return { type: \"game\", ...c };\n}\n\n/** Returns null if the event was fired out of the canvas */\nexport function canvasEventToGameCoords(event: EventOffsets, mapSize: GameMapSize, canvasSize: HTMLCanvasElement): GameCoords | null {\n  // in-game scale coords with left-top offset\n  const gx = (event.offsetX * mapSize.width) / canvasSize.width;\n  const gz = (event.offsetY * mapSize.height) / canvasSize.height;\n  if (gx < 0 || gx >= mapSize.width || gz < 0 || gz >= mapSize.height) {\n    return null;\n  }\n\n  // in-game coords (center offset)\n  const x = gx - Math.floor(mapSize.width / 2);\n  const z = Math.floor(mapSize.height / 2) - gz;\n  return gameCoords({ x: Math.round(x), z: Math.round(z) });\n}\n\nexport function threePlaneSize(width: number, height: number): ThreePlaneSize {\n  return { type: \"threePlane\", width, height };\n}\n\nexport function printError(e: unknown): void {\n  console.error(e);\n}\n\nexport async function fetchJson<T>(url: string): Promise<T> {\n  const r = await fetch(url);\n  if (!r.ok) throw Error(`Failed to fetch ${url}: ${r.statusText}`);\n  return (await r.json()) as T;\n}\n\nexport function basename(path: string) {\n  return path.substring(path.lastIndexOf(\"/\") + 1);\n}\n\nexport async function readWholeStream(stream: ReadableStream<Uint8Array>): Promise<Uint8Array> {\n  return new Uint8Array(await new Response(stream).arrayBuffer());\n}\n", "import { component, requireNonnull } from \"../utils\";\n\nexport function init(): void {\n  document.body.addEventListener(\"click\", ({ target }) => {\n    if (target instanceof HTMLButtonElement && target.dataset[\"inputFor\"] != null) {\n      const input = component(target.dataset[\"inputFor\"], HTMLInputElement);\n      input.value = requireNonnull(target.dataset[\"inputText\"] ?? target.textContent);\n      input.dispatchEvent(new Event(\"input\", { bubbles: true }));\n    }\n  });\n}\n", "import { component } from \"../utils\";\n\nexport function init(): void {\n  for (const eventName of [\"input\", \"change\"]) {\n    window.addEventListener(eventName, ({ target }) => {\n      if (!(target instanceof HTMLInputElement) || !(target instanceof HTMLTextAreaElement || !(target instanceof HTMLSelectElement)))\n        return;\n      const outputElements = document.querySelectorAll<HTMLOutputElement>(`output[data-sync-for=\"${target.id}\"]`);\n      for (const output of outputElements) {\n        output.value = target.value;\n      }\n    });\n  }\n\n  for (const output of document.querySelectorAll<HTMLOutputElement>(\"output[data-sync-for]\")) {\n    const input = component(output.dataset[\"syncFor\"], HTMLInputElement);\n    output.value = input.value;\n  }\n}\n", "// Sync values between two inputs, one for max and one for min.\n\nexport function init() {\n  for (const eventName of [\"input\", \"change\"]) {\n    window.addEventListener(eventName, ({ target }) => {\n      if (!(target instanceof HTMLInputElement)) return;\n      updateMinMax(target);\n    });\n  }\n\n  for (const input of [\n    ...document.querySelectorAll<HTMLInputElement>(\"input[data-max]\"),\n    ...document.querySelectorAll<HTMLInputElement>(\"input[data-min]\"),\n  ]) {\n    updateMinMax(input);\n  }\n}\n\nfunction updateMinMax(target: HTMLInputElement) {\n  if (target.dataset[\"min\"]) updateMaxValues(target, target.dataset[\"min\"]);\n  if (target.dataset[\"max\"]) updateMinValues(target, target.dataset[\"max\"]);\n}\n\nfunction updateMaxValues(target: HTMLInputElement, minMaxId: string) {\n  const maxInputs = document.querySelectorAll<HTMLInputElement>(`input[data-max=\"${minMaxId}\"]`);\n  for (const maxInput of maxInputs) {\n    if (maxInput.valueAsNumber < target.valueAsNumber) {\n      const oldValue = maxInput.value;\n      maxInput.value = target.value;\n      if (oldValue !== maxInput.value) dispatchInputEvent(maxInput);\n    }\n  }\n}\n\nfunction updateMinValues(target: HTMLInputElement, minMaxId: string) {\n  const minInputs = document.querySelectorAll<HTMLInputElement>(`input[data-min=\"${minMaxId}\"]`);\n  for (const minInput of minInputs) {\n    if (minInput.valueAsNumber > target.valueAsNumber) {\n      const oldValue = minInput.value;\n      minInput.value = target.value;\n      if (oldValue !== minInput.value) dispatchInputEvent(minInput);\n    }\n  }\n}\n\nfunction dispatchInputEvent(input: HTMLInputElement) {\n  for (const eventName of [\"input\", \"change\"]) input.dispatchEvent(new Event(eventName, { bubbles: true }));\n}\n", "import { printError, waitAnimationFrame } from \"./utils\";\n\nexport class DelayedRenderer<T> {\n  _iterator: Iterator<T[]> = ([] as T[][])[Symbol.iterator]();\n  appendee: HTMLElement;\n  scrollableWrapper: HTMLElement;\n  itemRenderer: (item: T) => Node;\n  scrollCallback = (): void => {\n    this.renderAll().catch(printError);\n  };\n\n  constructor(scrollableWrapper: HTMLElement, appendee: HTMLElement, itemRenderer: (item: T) => Node) {\n    if (!scrollableWrapper.contains(appendee)) throw Error(\"Wrapper element should contain appendee element\");\n    appendee.innerHTML = \"\";\n    this.appendee = appendee;\n    this.scrollableWrapper = scrollableWrapper;\n    this.itemRenderer = itemRenderer;\n  }\n\n  set iterator(iteratorOrIterable: Iterator<T> | Iterable<T>) {\n    if (\"next\" in iteratorOrIterable) {\n      this._iterator = chunkIterator(iteratorOrIterable);\n    } else {\n      this._iterator = chunkIterator(iteratorOrIterable[Symbol.iterator]());\n    }\n    this.appendee.innerHTML = \"\";\n    this.scrollableWrapper.removeEventListener(\"scroll\", this.scrollCallback);\n\n    // Require a delay because flashing childlen like the above fires \"scroll\" events.\n    requestAnimationFrame(() => {\n      this.scrollableWrapper.removeEventListener(\"scroll\", this.scrollCallback);\n      this.scrollableWrapper.addEventListener(\"scroll\", this.scrollCallback, { once: true });\n      // TODO Prevent double rendering iterations\n      renderUntil(this, () => isFill(this.scrollableWrapper)).catch(printError);\n    });\n  }\n\n  async renderAll(): Promise<void> {\n    await renderUntil(this, () => false);\n  }\n}\n\nasync function renderUntil<T>(self: DelayedRenderer<T>, stopPredicate: () => boolean) {\n  do {\n    const result = self._iterator.next();\n    if (isReturn(result)) break;\n    const df = new DocumentFragment();\n    result.value.forEach((i) => df.appendChild(self.itemRenderer(i)));\n    self.appendee.appendChild(df);\n    await waitAnimationFrame();\n  } while (!stopPredicate());\n}\n\nfunction isFill(wrapper: HTMLElement) {\n  return wrapper.clientHeight + 100 < wrapper.scrollHeight;\n}\n\nfunction chunkIterator<T, TReturn, TNext>(origin: Iterator<T, TReturn, TNext>, chunkSize = 10) {\n  let returnResult: IteratorReturnResult<TReturn> | null = null;\n  const chunkIter: Iterator<T[], TReturn, TNext> = {\n    next(...args: [] | [TNext]): IteratorResult<T[], TReturn> {\n      if (returnResult) return returnResult;\n      const chunk = Array<T>(chunkSize);\n      for (let i = 0; i < chunkSize; i++) {\n        const result = origin.next(...args);\n        if (isReturn(result)) {\n          returnResult = result;\n        } else {\n          chunk[i] = result.value;\n        }\n      }\n      return {\n        done: false,\n        value: chunk,\n      };\n    },\n  };\n  if (\"throw\" in origin) {\n    chunkIter.throw = (e?: unknown): IteratorResult<T[], TReturn> => {\n      const r = (origin.throw as (e?: unknown) => IteratorResult<T, TReturn>)(e);\n      if (isReturn(r)) return r;\n      else return { done: r.done ?? false, value: [r.value] };\n    };\n  }\n  if (\"return\" in origin) {\n    chunkIter.return = (treturn?: TReturn): IteratorResult<T[], TReturn> => {\n      const r = (origin.return as (treturn?: TReturn | undefined) => IteratorResult<T, TReturn>)(treturn);\n      if (isReturn(r)) return r;\n      else return { done: r.done ?? false, value: [r.value] };\n    };\n  }\n  return chunkIter;\n}\n\nfunction isReturn<T, TReturn>(r: IteratorResult<T, TReturn>): r is IteratorReturnResult<TReturn> {\n  return Boolean(r.done);\n}\n", "import { fetchJson } from \"./utils\";\n\nexport const LANGUAGES = [\n  \"english\",\n  \"german\",\n  \"spanish\",\n  \"french\",\n  \"italian\",\n  \"japanese\",\n  \"koreana\",\n  \"polish\",\n  \"brazilian\",\n  \"russian\",\n  \"turkish\",\n  \"schinese\",\n  \"tchinese\",\n] as const;\nexport type Language = (typeof LANGUAGES)[number];\n\nconst LANGUAGE_TAGS: { [tag: string]: Language } = {\n  en: \"english\",\n  de: \"german\",\n  es: \"spanish\",\n  fr: \"french\",\n  it: \"italian\",\n  ja: \"japanese\",\n  ko: \"koreana\",\n  pl: \"polish\",\n  pt: \"brazilian\",\n  ru: \"russian\",\n  tr: \"turkish\",\n  \"zh-CN\": \"schinese\",\n  \"zh-TW\": \"tchinese\",\n};\n\nconst FILE_BASE_NAMES = [\"blocks\", \"prefabs\", \"shapes\"] as const;\ntype FileBaseName = (typeof FILE_BASE_NAMES)[number];\n\nexport class LabelHolder {\n  static DEFAULT_LANGUAGE: Language = \"english\";\n\n  #baseUrl: string;\n  #language: Language;\n  #fallbacks: Map<FileBaseName, Promise<Map<string, string>>>;\n  #labels: Map<FileBaseName, Promise<Labels>>;\n\n  constructor(baseUrl: string, navigatorLanguages: readonly string[]) {\n    this.#baseUrl = baseUrl;\n    this.#language = resolveLanguage(navigatorLanguages);\n    this.#fallbacks = new Map(FILE_BASE_NAMES.map((n) => [n, this.#fetchLabelMap(LabelHolder.DEFAULT_LANGUAGE, n)] as const));\n    this.#labels = this.#buildAllLabels();\n  }\n\n  get(fileId: FileBaseName): Promise<Labels> {\n    const labels = this.#labels.get(fileId);\n    if (!labels) throw new Error(`No labels for ${this.#language}/${fileId}`);\n    return labels;\n  }\n\n  set language(lang: Language) {\n    if (lang === this.#language) return;\n    console.log(\"LabelHolder set language: %s -> %s\", this.#language, lang);\n    this.#language = lang;\n    this.#labels = this.#buildAllLabels();\n  }\n\n  #buildAllLabels(): Map<FileBaseName, Promise<Labels>> {\n    return new Map(FILE_BASE_NAMES.map((n) => [n, this.#buildLabels(n)]));\n  }\n\n  async #buildLabels(fileBaseName: FileBaseName): Promise<Labels> {\n    const fallback = this.#fallbacks.get(fileBaseName);\n    if (!fallback) throw new Error(`No fallback for ${this.#language}/${fileBaseName}`);\n    return new Labels(await this.#fetchLabelMap(this.#language, fileBaseName), await fallback);\n  }\n\n  async #fetchLabelMap(language: Language, fileId: FileBaseName): Promise<Map<string, string>> {\n    return new Map(Object.entries(await fetchJson(`${this.#baseUrl}/${language}/${fileId}.json`)));\n  }\n}\n\nexport class Labels {\n  #labels: Map<string, string>;\n  #fallback: Map<string, string>;\n\n  constructor(labels: Map<string, string>, defaultLabels: Map<string, string>) {\n    this.#labels = labels;\n    this.#fallback = defaultLabels;\n  }\n\n  get(key: string): string | undefined {\n    return this.#labels.get(key) ?? this.#fallback.get(key);\n  }\n}\n\nexport function resolveLanguage(languages: readonly string[]): Language {\n  for (const clientTag of languages) {\n    for (const [tag, lang] of Object.entries(LANGUAGE_TAGS)) {\n      if (clientTag.startsWith(tag)) return lang;\n    }\n  }\n  return LabelHolder.DEFAULT_LANGUAGE;\n}\n", "import { LANGUAGES, Language, resolveLanguage } from \"./labels\";\nimport { printError } from \"./utils\";\n\ninterface Doms {\n  language: HTMLSelectElement;\n}\n\nexport class LabelHandler {\n  private doms: Doms;\n  private listener: ((lang: Language) => void | Promise<void>)[] = [];\n\n  constructor(doms: Doms, navigatorLanguages: readonly string[]) {\n    this.doms = doms;\n    this.buildSelectOptions(navigatorLanguages);\n    this.doms.language.addEventListener(\"change\", () => {\n      this.listener.forEach((fn) => {\n        fn(this.doms.language.value as Language)?.catch(printError);\n      });\n    });\n  }\n\n  private buildSelectOptions(navigatorLanguages: readonly string[]) {\n    const existingLangs = new Set(Array.from(this.doms.language.options).map((o) => o.value));\n    for (const lang of LANGUAGES) {\n      if (existingLangs.has(lang)) {\n        continue;\n      }\n      const option = document.createElement(\"option\");\n      option.textContent = lang;\n      this.doms.language.appendChild(option);\n    }\n\n    const browserLang = resolveLanguage(navigatorLanguages);\n    if (this.doms.language.value !== browserLang) {\n      this.doms.language.value = resolveLanguage(navigatorLanguages);\n      requestAnimationFrame(() => this.doms.language.dispatchEvent(new Event(\"change\")));\n    }\n  }\n\n  addListener(fn: (lang: Language) => void | Promise<void>) {\n    this.listener.push(fn);\n  }\n}\n", "interface StateElement {\n  defaultValue: string;\n  element: HTMLInputElement;\n}\n\n// Store values of input elements in the URL query string.\nexport class UrlState {\n  private url: URL;\n  private inputs: Map<HTMLInputElement, StateElement>;\n  private udpateListeners: ((url: URL) => void)[] = [];\n\n  private constructor(browserUrl: URL, elements: ArrayLike<StateElement>) {\n    this.url = browserUrl;\n    this.inputs = new Map(Array.from(elements).map((e) => [e.element, e]));\n    this.init();\n  }\n\n  private init() {\n    for (const [input, { defaultValue }] of this.inputs.entries()) {\n      if (this.url.searchParams.has(input.id)) {\n        setValue(input, this.url.searchParams.get(input.id) ?? defaultValue);\n        input.dispatchEvent(new Event(\"input\"));\n      }\n\n      input.addEventListener(\"input\", () => {\n        this.updateUrl(input, defaultValue);\n        this.udpateListeners.forEach((fn) => {\n          fn(this.url);\n        });\n      });\n    }\n  }\n\n  static create(location: Location, elements: ArrayLike<HTMLInputElement>): UrlState {\n    return new UrlState(\n      new URL(location.href),\n      Array.from(elements).map((e) => ({ defaultValue: getValue(e), element: e })),\n    );\n  }\n\n  private updateUrl(input: HTMLInputElement, defaultValue: string) {\n    const value = getValue(input);\n    if (value === defaultValue) {\n      this.url.searchParams.delete(input.id);\n    } else {\n      this.url.searchParams.set(input.id, value);\n    }\n  }\n\n  addUpdateListener(listener: (url: URL) => void) {\n    this.udpateListeners.push(listener);\n  }\n}\n\nfunction getValue(input: HTMLInputElement): string {\n  switch (input.type) {\n    case \"checkbox\":\n      return input.checked ? \"t\" : \"\";\n    default:\n      return input.value;\n  }\n}\n\nfunction setValue(input: HTMLInputElement, value: string) {\n  switch (input.type) {\n    case \"checkbox\":\n      input.checked = value === \"t\";\n      break;\n    default:\n      input.value = value;\n  }\n}\n", "import * as presetButton from \"./lib/ui/preset-button\";\nimport * as syncOutput from \"./lib/ui/sync-output\";\nimport * as minMaxInputs from \"./lib/ui/min-max-inputs\";\nimport { DelayedRenderer } from \"./lib/delayed-renderer\";\nimport { component, fetchJson, printError } from \"./lib/utils\";\nimport { PrefabUpdate } from \"./lib/prefabs\";\nimport * as prefabsFilter from \"./worker/prefabs-filter\";\nimport { Language } from \"./lib/labels\";\nimport { LabelHandler } from \"./lib/label-handler\";\nimport { UrlState } from \"./lib/url-state\";\n\ninterface HighlightedPrefab {\n  name: string;\n  difficulty?: number;\n  highlightedName?: string;\n  highlightedLabel?: string;\n  matchedBlocks?: HighlightedBlock[];\n}\n\nfunction main() {\n  presetButton.init();\n  syncOutput.init();\n  minMaxInputs.init();\n\n  const urlState = UrlState.create(location, document.querySelectorAll(\"input\"));\n  urlState.addUpdateListener((url) => {\n    window.history.replaceState(null, \"\", url.toString());\n  });\n\n  const prefabsHandler = new PrefabsHandler(new Worker(\"worker/prefabs-filter.js\"));\n  (async () => {\n    const [prefabBlockCounts, difficulties] = await Promise.all([\n      fetchJson<PrefabBlockCounts>(\"prefab-block-counts.json\"),\n      fetchJson<PrefabDifficulties>(\"prefab-difficulties.json\"),\n    ]);\n    prefabsHandler.prefabs = Object.keys(prefabBlockCounts).map((n) => ({\n      name: n,\n      x: 0,\n      z: 0,\n      difficulty: difficulties[n] ?? 0,\n    }));\n  })().catch(printError);\n\n  const minTier = component(\"min_tier\", HTMLInputElement);\n  const maxTier = component(\"max_tier\", HTMLInputElement);\n  const tierRange = { start: minTier.valueAsNumber, end: maxTier.valueAsNumber };\n  prefabsHandler.tierRange = tierRange;\n  minTier.addEventListener(\"input\", () => {\n    const newMinTier = minTier.valueAsNumber;\n    if (newMinTier === tierRange.start) return;\n    tierRange.start = newMinTier;\n    if (newMinTier > maxTier.valueAsNumber) {\n      maxTier.value = minTier.value;\n      tierRange.end = newMinTier;\n      maxTier.dispatchEvent(new Event(\"input\"));\n    }\n    prefabsHandler.tierRange = tierRange;\n  });\n  maxTier.addEventListener(\"input\", () => {\n    const newMaxTier = maxTier.valueAsNumber;\n    if (newMaxTier === tierRange.end) return;\n    tierRange.end = newMaxTier;\n    if (newMaxTier < minTier.valueAsNumber) {\n      minTier.value = maxTier.value;\n      tierRange.start = newMaxTier;\n      minTier.dispatchEvent(new Event(\"input\"));\n    }\n    prefabsHandler.tierRange = tierRange;\n  });\n  const tierClear = component(\"tier_clear\", HTMLButtonElement);\n  tierClear.addEventListener(\"click\", () => {\n    minTier.value = minTier.defaultValue;\n    maxTier.value = maxTier.defaultValue;\n    minTier.dispatchEvent(new Event(\"input\"));\n    maxTier.dispatchEvent(new Event(\"input\"));\n  });\n\n  const prefabFilter = component(\"prefab_filter\", HTMLInputElement);\n  prefabsHandler.prefabFilter = prefabFilter.value;\n  prefabFilter.addEventListener(\"input\", () => {\n    prefabsHandler.prefabFilter = prefabFilter.value;\n  });\n\n  const blockFilter = component(\"block_filter\", HTMLInputElement);\n  prefabsHandler.blockFilter = blockFilter.value;\n  blockFilter.addEventListener(\"input\", () => {\n    prefabsHandler.blockFilter = blockFilter.value;\n  });\n\n  const labelHandler = new LabelHandler({ language: component(\"label_lang\", HTMLSelectElement) }, navigator.languages);\n  labelHandler.addListener((lang) => {\n    prefabsHandler.language = lang;\n  });\n\n  const prefabFilterHandler = new PrefabFilterHandler({ devPrefabs: component(\"dev_prefabs\", HTMLInputElement) });\n  prefabFilterHandler.addUpdateListener(() => {\n    prefabsHandler.refresh();\n  });\n\n  const prefabListRenderer = new DelayedRenderer<HighlightedPrefab>(document.documentElement, component(\"prefabs_list\"), (p) =>\n    prefabLi(p),\n  );\n  prefabsHandler.listeners.push((update) => {\n    prefabListRenderer.iterator = update.prefabs.filter(prefabFilterHandler.filter());\n  });\n\n  // Workaround that document.documentElement never fires \"scroll\" event\n  document.addEventListener(\"scroll\", () => {\n    document.documentElement.dispatchEvent(new Event(\"scroll\"));\n  });\n}\n\nfunction prefabLi(prefab: HighlightedPrefab) {\n  const li = document.createElement(\"li\");\n  li.innerHTML = [\n    ...(prefab.difficulty\n      ? [\n          `<span title=\"Difficulty Tier ${prefab.difficulty.toString()}\" class=\"prefab_difficulty_${prefab.difficulty.toString()}\">`,\n          `  \uD83D\uDC80${prefab.difficulty.toString()}`,\n          `</span>`,\n        ]\n      : []),\n    `<a href=\"prefabs/${prefab.name}.html\" target=\"_blank\">`,\n    prefab.highlightedLabel ?? \"-\",\n    \"/\",\n    `<small>${prefab.highlightedName ?? prefab.name}</small></a>`,\n    ...(prefab.matchedBlocks && prefab.matchedBlocks.length > 0 ? [\"has\", countHighlightedBlocks(prefab.matchedBlocks), \"blocks\"] : []),\n  ].join(\" \");\n  if (prefab.matchedBlocks && prefab.matchedBlocks.length > 0) {\n    const blocksUl = document.createElement(\"ul\");\n    prefab.matchedBlocks.forEach((block) => {\n      if (block.count === undefined) return;\n      const blockLi = document.createElement(\"li\");\n      blockLi.innerHTML = [\n        `<button data-input-for=\"blocks_filter\" data-input-text=\"${block.name}\" title=\"Filter with this block name\">\u25B2</button>`,\n        `${block.count.toString()}x`,\n        block.highlightedLabel,\n        `<small>${block.highlightedName}</small>`,\n      ].join(\" \");\n      blocksUl.appendChild(blockLi);\n    });\n    li.appendChild(blocksUl);\n  }\n  return li;\n}\n\nfunction countHighlightedBlocks(blocks: HighlightedBlock[]): number {\n  return blocks.reduce((acc, b) => acc + (b.count ?? 0), 0);\n}\n\ndeclare class PrefabsFilterWorker extends Worker {\n  postMessage(message: prefabsFilter.InMessage): void;\n}\n\nclass PrefabsHandler {\n  worker: PrefabsFilterWorker;\n  listeners: ((prefabs: PrefabUpdate) => void | Promise<void>)[] = [];\n\n  constructor(worker: PrefabsFilterWorker) {\n    this.worker = worker;\n    this.worker.addEventListener(\"message\", (event: MessageEvent<PrefabUpdate>) => {\n      for (const fn of this.listeners) {\n        fn(event.data)?.catch(printError);\n      }\n    });\n  }\n\n  set prefabs(p: Prefab[]) {\n    this.worker.postMessage({ all: p });\n  }\n\n  set tierRange(range: NumberRange) {\n    this.worker.postMessage({ difficulty: range });\n  }\n\n  set prefabFilter(filter: string) {\n    this.worker.postMessage({ prefabFilterRegexp: filter });\n  }\n\n  set blockFilter(filter: string) {\n    this.worker.postMessage({ blockFilterRegexp: filter });\n  }\n\n  set language(language: Language) {\n    this.worker.postMessage({ language });\n  }\n\n  refresh() {\n    this.worker.postMessage({});\n  }\n}\n\nconst DEV_PREFAB_REGEXP = /^(aaa_|AAA_|spacercise_|terrain_smoothing_bug)/;\n\nclass PrefabFilterHandler {\n  displayDevPrefab = false;\n  updateListener: (() => void)[] = [];\n\n  constructor(doms: { devPrefabs: HTMLInputElement }) {\n    this.displayDevPrefab = doms.devPrefabs.checked;\n    doms.devPrefabs.addEventListener(\"input\", () => {\n      this.displayDevPrefab = doms.devPrefabs.checked;\n      this.updateListener.forEach((fn) => {\n        fn();\n      });\n    });\n  }\n\n  filter(): (prefab: HighlightedPrefab) => boolean {\n    return (prefab) => {\n      if (!this.displayDevPrefab) {\n        return !DEV_PREFAB_REGEXP.test(prefab.name);\n      }\n      return true;\n    };\n  }\n\n  addUpdateListener(fn: () => void) {\n    this.updateListener.push(fn);\n  }\n}\n\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", main);\n} else {\n  main();\n}\n"],
  "mappings": ";;;AAAO,WAAS,eAAkB,GAAyB,eAAe,MAAM,qBAAqB,OAAO,CAAC,CAAC,IAAO;AACnH,QAAI,KAAK,KAAM,OAAM,MAAM,aAAa,CAAC;AACzC,WAAO;AAAA,EACT;AAQO,WAAS,YACd,GACA,GACA,eAAe,MAAM,gCAAgC,OAAO,CAAC,CAAC,qBAAqB,OAAO,CAAC,CAAC,IACzF;AACH,QAAI,aAAa,EAAG,QAAO;AAC3B,UAAM,MAAM,aAAa,CAAC;AAAA,EAC5B;AAEO,WAAS,UAA+C,IAA+B,GAAmC;AAC/H,QAAM,IAAI,eAAe,IAAI,MAAM,iCAAiC,GAC9D,IAAI,eAAe,SAAS,eAAe,CAAC,GAAG,MAAM,uBAAuB,CAAC,EAAE;AACrF,WAAO,IAAI,YAAY,GAAG,CAAC,IAAK;AAAA,EAClC;AAaO,WAAS,qBAAsC;AACpD,WAAO,IAAI,QAAQ,CAAC,MAAM,sBAAsB,CAAC,CAAC;AAAA,EACpD;AA4DO,WAAS,WAAW,GAAkB;AAC3C,YAAQ,MAAM,CAAC;AAAA,EACjB;AAEA,iBAAsB,UAAa,KAAyB;AAC1D,QAAM,IAAI,MAAM,MAAM,GAAG;AACzB,QAAI,CAAC,EAAE,GAAI,OAAM,MAAM,mBAAmB,GAAG,KAAK,EAAE,UAAU,EAAE;AAChE,WAAQ,MAAM,EAAE,KAAK;AAAA,EACvB;;;ACzGO,WAAS,OAAa;AAC3B,aAAS,KAAK,iBAAiB,SAAS,CAAC,EAAE,OAAO,MAAM;AACtD,UAAI,kBAAkB,qBAAqB,OAAO,QAAQ,YAAe,MAAM;AAC7E,YAAM,QAAQ,UAAU,OAAO,QAAQ,UAAa,gBAAgB;AACpE,cAAM,QAAQ,eAAe,OAAO,QAAQ,aAAgB,OAAO,WAAW,GAC9E,MAAM,cAAc,IAAI,MAAM,SAAS,EAAE,SAAS,GAAK,CAAC,CAAC;AAAA,MAC3D;AAAA,IACF,CAAC;AAAA,EACH;;;ACRO,WAASA,QAAa;AAC3B,aAAW,aAAa,CAAC,SAAS,QAAQ;AACxC,aAAO,iBAAiB,WAAW,CAAC,EAAE,OAAO,MAAM;AACjD,YAAI,EAAE,kBAAkB,qBAAqB,EAAE,kBAAkB,uBAAuB,EAAE,kBAAkB;AAC1G;AACF,YAAM,iBAAiB,SAAS,iBAAoC,yBAAyB,OAAO,EAAE,IAAI;AAC1G,iBAAW,UAAU;AACnB,iBAAO,QAAQ,OAAO;AAAA,MAE1B,CAAC;AAGH,aAAW,UAAU,SAAS,iBAAoC,uBAAuB,GAAG;AAC1F,UAAM,QAAQ,UAAU,OAAO,QAAQ,SAAY,gBAAgB;AACnE,aAAO,QAAQ,MAAM;AAAA,IACvB;AAAA,EACF;;;AChBO,WAASC,QAAO;AACrB,aAAW,aAAa,CAAC,SAAS,QAAQ;AACxC,aAAO,iBAAiB,WAAW,CAAC,EAAE,OAAO,MAAM;AACjD,QAAM,kBAAkB,oBACxB,aAAa,MAAM;AAAA,MACrB,CAAC;AAGH,aAAW,SAAS;AAAA,MAClB,GAAG,SAAS,iBAAmC,iBAAiB;AAAA,MAChE,GAAG,SAAS,iBAAmC,iBAAiB;AAAA,IAClE;AACE,mBAAa,KAAK;AAAA,EAEtB;AAEA,WAAS,aAAa,QAA0B;AAC9C,IAAI,OAAO,QAAQ,OAAQ,gBAAgB,QAAQ,OAAO,QAAQ,GAAM,GACpE,OAAO,QAAQ,OAAQ,gBAAgB,QAAQ,OAAO,QAAQ,GAAM;AAAA,EAC1E;AAEA,WAAS,gBAAgB,QAA0B,UAAkB;AACnE,QAAM,YAAY,SAAS,iBAAmC,mBAAmB,QAAQ,IAAI;AAC7F,aAAW,YAAY;AACrB,UAAI,SAAS,gBAAgB,OAAO,eAAe;AACjD,YAAM,WAAW,SAAS;AAC1B,iBAAS,QAAQ,OAAO,OACpB,aAAa,SAAS,SAAO,mBAAmB,QAAQ;AAAA,MAC9D;AAAA,EAEJ;AAEA,WAAS,gBAAgB,QAA0B,UAAkB;AACnE,QAAM,YAAY,SAAS,iBAAmC,mBAAmB,QAAQ,IAAI;AAC7F,aAAW,YAAY;AACrB,UAAI,SAAS,gBAAgB,OAAO,eAAe;AACjD,YAAM,WAAW,SAAS;AAC1B,iBAAS,QAAQ,OAAO,OACpB,aAAa,SAAS,SAAO,mBAAmB,QAAQ;AAAA,MAC9D;AAAA,EAEJ;AAEA,WAAS,mBAAmB,OAAyB;AACnD,aAAW,aAAa,CAAC,SAAS,QAAQ,EAAG,OAAM,cAAc,IAAI,MAAM,WAAW,EAAE,SAAS,GAAK,CAAC,CAAC;AAAA,EAC1G;;;AC7CO,MAAM,kBAAN,MAAyB;AAAA,IAC9B,YAA4B,CAAC,EAAY,OAAO,QAAQ,EAAE;AAAA,IAC1D;AAAA,IACA;AAAA,IACA;AAAA,IACA,iBAAiB,MAAY;AAC3B,WAAK,UAAU,EAAE,MAAM,UAAU;AAAA,IACnC;AAAA,IAEA,YAAY,mBAAgC,UAAuB,cAAiC;AAClG,UAAI,CAAC,kBAAkB,SAAS,QAAQ,EAAG,OAAM,MAAM,iDAAiD;AACxG,eAAS,YAAY,IACrB,KAAK,WAAW,UAChB,KAAK,oBAAoB,mBACzB,KAAK,eAAe;AAAA,IACtB;AAAA,IAEA,IAAI,SAAS,oBAA+C;AAC1D,MAAI,UAAU,qBACZ,KAAK,YAAY,cAAc,kBAAkB,IAEjD,KAAK,YAAY,cAAc,mBAAmB,OAAO,QAAQ,EAAE,CAAC,GAEtE,KAAK,SAAS,YAAY,IAC1B,KAAK,kBAAkB,oBAAoB,UAAU,KAAK,cAAc,GAGxE,sBAAsB,MAAM;AAC1B,aAAK,kBAAkB,oBAAoB,UAAU,KAAK,cAAc,GACxE,KAAK,kBAAkB,iBAAiB,UAAU,KAAK,gBAAgB,EAAE,MAAM,GAAK,CAAC,GAErF,YAAY,MAAM,MAAM,OAAO,KAAK,iBAAiB,CAAC,EAAE,MAAM,UAAU;AAAA,MAC1E,CAAC;AAAA,IACH;AAAA,IAEA,MAAM,YAA2B;AAC/B,YAAM,YAAY,MAAM,MAAM,EAAK;AAAA,IACrC;AAAA,EACF;AAEA,iBAAe,YAAe,MAA0B,eAA8B;AACpF,OAAG;AACD,UAAM,SAAS,KAAK,UAAU,KAAK;AACnC,UAAI,SAAS,MAAM,EAAG;AACtB,UAAM,KAAK,IAAI,iBAAiB;AAChC,aAAO,MAAM,QAAQ,CAAC,MAAM,GAAG,YAAY,KAAK,aAAa,CAAC,CAAC,CAAC,GAChE,KAAK,SAAS,YAAY,EAAE,GAC5B,MAAM,mBAAmB;AAAA,IAC3B,SAAS,CAAC,cAAc;AAAA,EAC1B;AAEA,WAAS,OAAO,SAAsB;AACpC,WAAO,QAAQ,eAAe,MAAM,QAAQ;AAAA,EAC9C;AAEA,WAAS,cAAiC,QAAqC,YAAY,IAAI;AAC7F,QAAI,eAAqD,MACnD,YAA2C;AAAA,MAC/C,QAAQ,MAAkD;AACxD,YAAI,aAAc,QAAO;AACzB,YAAM,QAAQ,MAAS,SAAS;AAChC,iBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,cAAM,SAAS,OAAO,KAAK,GAAG,IAAI;AAClC,UAAI,SAAS,MAAM,IACjB,eAAe,SAEf,MAAM,CAAC,IAAI,OAAO;AAAA,QAEtB;AACA,eAAO;AAAA,UACL,MAAM;AAAA,UACN,OAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF;AACA,WAAI,WAAW,WACb,UAAU,QAAQ,CAAC,MAA8C;AAC/D,UAAM,IAAK,OAAO,MAAsD,CAAC;AACzE,aAAI,SAAS,CAAC,IAAU,IACZ,EAAE,MAAM,EAAE,QAAQ,IAAO,OAAO,CAAC,EAAE,KAAK,EAAE;AAAA,IACxD,IAEE,YAAY,WACd,UAAU,SAAS,CAAC,YAAoD;AACtE,UAAM,IAAK,OAAO,OAAyE,OAAO;AAClG,aAAI,SAAS,CAAC,IAAU,IACZ,EAAE,MAAM,EAAE,QAAQ,IAAO,OAAO,CAAC,EAAE,KAAK,EAAE;AAAA,IACxD,IAEK;AAAA,EACT;AAEA,WAAS,SAAqB,GAAmE;AAC/F,WAAO,EAAQ,EAAE;AAAA,EACnB;;;AC9FO,MAAM,YAAY;AAAA,IACvB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,GAGM,gBAA6C;AAAA,IACjD,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,SAAS;AAAA,IACT,SAAS;AAAA,EACX,GAEM,kBAAkB,CAAC,UAAU,WAAW,QAAQ,GAGzC,cAAN,MAAM,aAAY;AAAA,IACvB,OAAO,mBAA6B;AAAA,IAEpC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IAEA,YAAY,SAAiB,oBAAuC;AAClE,WAAK,WAAW,SAChB,KAAK,YAAY,gBAAgB,kBAAkB,GACnD,KAAK,aAAa,IAAI,IAAI,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,eAAe,aAAY,kBAAkB,CAAC,CAAC,CAAU,CAAC,GACxH,KAAK,UAAU,KAAK,gBAAgB;AAAA,IACtC;AAAA,IAEA,IAAI,QAAuC;AACzC,UAAM,SAAS,KAAK,QAAQ,IAAI,MAAM;AACtC,UAAI,CAAC,OAAQ,OAAM,IAAI,MAAM,iBAAiB,KAAK,SAAS,IAAI,MAAM,EAAE;AACxE,aAAO;AAAA,IACT;AAAA,IAEA,IAAI,SAAS,MAAgB;AAC3B,MAAI,SAAS,KAAK,cAClB,QAAQ,IAAI,sCAAsC,KAAK,WAAW,IAAI,GACtE,KAAK,YAAY,MACjB,KAAK,UAAU,KAAK,gBAAgB;AAAA,IACtC;AAAA,IAEA,kBAAsD;AACpD,aAAO,IAAI,IAAI,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,aAAa,CAAC,CAAC,CAAC,CAAC;AAAA,IACtE;AAAA,IAEA,MAAM,aAAa,cAA6C;AAC9D,UAAM,WAAW,KAAK,WAAW,IAAI,YAAY;AACjD,UAAI,CAAC,SAAU,OAAM,IAAI,MAAM,mBAAmB,KAAK,SAAS,IAAI,YAAY,EAAE;AAClF,aAAO,IAAI,OAAO,MAAM,KAAK,eAAe,KAAK,WAAW,YAAY,GAAG,MAAM,QAAQ;AAAA,IAC3F;AAAA,IAEA,MAAM,eAAe,UAAoB,QAAoD;AAC3F,aAAO,IAAI,IAAI,OAAO,QAAQ,MAAM,UAAU,GAAG,KAAK,QAAQ,IAAI,QAAQ,IAAI,MAAM,OAAO,CAAC,CAAC;AAAA,IAC/F;AAAA,EACF,GAEa,SAAN,MAAa;AAAA,IAClB;AAAA,IACA;AAAA,IAEA,YAAY,QAA6B,eAAoC;AAC3E,WAAK,UAAU,QACf,KAAK,YAAY;AAAA,IACnB;AAAA,IAEA,IAAI,KAAiC;AACnC,aAAO,KAAK,QAAQ,IAAI,GAAG,KAAK,KAAK,UAAU,IAAI,GAAG;AAAA,IACxD;AAAA,EACF;AAEO,WAAS,gBAAgB,WAAwC;AACtE,aAAW,aAAa;AACtB,eAAW,CAAC,KAAK,IAAI,KAAK,OAAO,QAAQ,aAAa;AACpD,YAAI,UAAU,WAAW,GAAG,EAAG,QAAO;AAG1C,WAAO,YAAY;AAAA,EACrB;;;AC/FO,MAAM,eAAN,MAAmB;AAAA,IAChB;AAAA,IACA,WAAyD,CAAC;AAAA,IAElE,YAAY,MAAY,oBAAuC;AAC7D,WAAK,OAAO,MACZ,KAAK,mBAAmB,kBAAkB,GAC1C,KAAK,KAAK,SAAS,iBAAiB,UAAU,MAAM;AAClD,aAAK,SAAS,QAAQ,CAAC,OAAO;AAC5B,aAAG,KAAK,KAAK,SAAS,KAAiB,GAAG,MAAM,UAAU;AAAA,QAC5D,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAAA,IAEQ,mBAAmB,oBAAuC;AAChE,UAAM,gBAAgB,IAAI,IAAI,MAAM,KAAK,KAAK,KAAK,SAAS,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC;AACxF,eAAW,QAAQ,WAAW;AAC5B,YAAI,cAAc,IAAI,IAAI;AACxB;AAEF,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,eAAO,cAAc,MACrB,KAAK,KAAK,SAAS,YAAY,MAAM;AAAA,MACvC;AAEA,UAAM,cAAc,gBAAgB,kBAAkB;AACtD,MAAI,KAAK,KAAK,SAAS,UAAU,gBAC/B,KAAK,KAAK,SAAS,QAAQ,gBAAgB,kBAAkB,GAC7D,sBAAsB,MAAM,KAAK,KAAK,SAAS,cAAc,IAAI,MAAM,QAAQ,CAAC,CAAC;AAAA,IAErF;AAAA,IAEA,YAAY,IAA8C;AACxD,WAAK,SAAS,KAAK,EAAE;AAAA,IACvB;AAAA,EACF;;;ACpCO,MAAM,WAAN,MAAM,UAAS;AAAA,IACZ;AAAA,IACA;AAAA,IACA,kBAA0C,CAAC;AAAA,IAE3C,YAAY,YAAiB,UAAmC;AACtE,WAAK,MAAM,YACX,KAAK,SAAS,IAAI,IAAI,MAAM,KAAK,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,GACrE,KAAK,KAAK;AAAA,IACZ;AAAA,IAEQ,OAAO;AACb,eAAW,CAAC,OAAO,EAAE,aAAa,CAAC,KAAK,KAAK,OAAO,QAAQ;AAC1D,QAAI,KAAK,IAAI,aAAa,IAAI,MAAM,EAAE,MACpC,SAAS,OAAO,KAAK,IAAI,aAAa,IAAI,MAAM,EAAE,KAAK,YAAY,GACnE,MAAM,cAAc,IAAI,MAAM,OAAO,CAAC,IAGxC,MAAM,iBAAiB,SAAS,MAAM;AACpC,eAAK,UAAU,OAAO,YAAY,GAClC,KAAK,gBAAgB,QAAQ,CAAC,OAAO;AACnC,eAAG,KAAK,GAAG;AAAA,UACb,CAAC;AAAA,QACH,CAAC;AAAA,IAEL;AAAA,IAEA,OAAO,OAAOC,WAAoB,UAAiD;AACjF,aAAO,IAAI;AAAA,QACT,IAAI,IAAIA,UAAS,IAAI;AAAA,QACrB,MAAM,KAAK,QAAQ,EAAE,IAAI,CAAC,OAAO,EAAE,cAAc,SAAS,CAAC,GAAG,SAAS,EAAE,EAAE;AAAA,MAC7E;AAAA,IACF;AAAA,IAEQ,UAAU,OAAyB,cAAsB;AAC/D,UAAM,QAAQ,SAAS,KAAK;AAC5B,MAAI,UAAU,eACZ,KAAK,IAAI,aAAa,OAAO,MAAM,EAAE,IAErC,KAAK,IAAI,aAAa,IAAI,MAAM,IAAI,KAAK;AAAA,IAE7C;AAAA,IAEA,kBAAkB,UAA8B;AAC9C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAAA,EACF;AAEA,WAAS,SAAS,OAAiC;AACjD,YAAQ,MAAM,MAAM;AAAA,MAClB,KAAK;AACH,eAAO,MAAM,UAAU,MAAM;AAAA,MAC/B;AACE,eAAO,MAAM;AAAA,IACjB;AAAA,EACF;AAEA,WAAS,SAAS,OAAyB,OAAe;AACxD,YAAQ,MAAM,MAAM;AAAA,MAClB,KAAK;AACH,cAAM,UAAU,UAAU;AAC1B;AAAA,MACF;AACE,cAAM,QAAQ;AAAA,IAClB;AAAA,EACF;;;ACpDA,WAAS,OAAO;AACd,IAAa,KAAK,GACPC,MAAK,GACHA,MAAK,GAED,SAAS,OAAO,UAAU,SAAS,iBAAiB,OAAO,CAAC,EACpE,kBAAkB,CAAC,QAAQ;AAClC,aAAO,QAAQ,aAAa,MAAM,IAAI,IAAI,SAAS,CAAC;AAAA,IACtD,CAAC;AAED,QAAM,iBAAiB,IAAI,eAAe,IAAI,OAAO,0BAA0B,CAAC;AAChF,KAAC,YAAY;AACX,UAAM,CAAC,mBAAmB,YAAY,IAAI,MAAM,QAAQ,IAAI;AAAA,QAC1D,UAA6B,0BAA0B;AAAA,QACvD,UAA8B,0BAA0B;AAAA,MAC1D,CAAC;AACD,qBAAe,UAAU,OAAO,KAAK,iBAAiB,EAAE,IAAI,CAAC,OAAO;AAAA,QAClE,MAAM;AAAA,QACN,GAAG;AAAA,QACH,GAAG;AAAA,QACH,YAAY,aAAa,CAAC,KAAK;AAAA,MACjC,EAAE;AAAA,IACJ,GAAG,EAAE,MAAM,UAAU;AAErB,QAAM,UAAU,UAAU,YAAY,gBAAgB,GAChD,UAAU,UAAU,YAAY,gBAAgB,GAChD,YAAY,EAAE,OAAO,QAAQ,eAAe,KAAK,QAAQ,cAAc;AAC7E,mBAAe,YAAY,WAC3B,QAAQ,iBAAiB,SAAS,MAAM;AACtC,UAAM,aAAa,QAAQ;AAC3B,MAAI,eAAe,UAAU,UAC7B,UAAU,QAAQ,YACd,aAAa,QAAQ,kBACvB,QAAQ,QAAQ,QAAQ,OACxB,UAAU,MAAM,YAChB,QAAQ,cAAc,IAAI,MAAM,OAAO,CAAC,IAE1C,eAAe,YAAY;AAAA,IAC7B,CAAC,GACD,QAAQ,iBAAiB,SAAS,MAAM;AACtC,UAAM,aAAa,QAAQ;AAC3B,MAAI,eAAe,UAAU,QAC7B,UAAU,MAAM,YACZ,aAAa,QAAQ,kBACvB,QAAQ,QAAQ,QAAQ,OACxB,UAAU,QAAQ,YAClB,QAAQ,cAAc,IAAI,MAAM,OAAO,CAAC,IAE1C,eAAe,YAAY;AAAA,IAC7B,CAAC,GACiB,UAAU,cAAc,iBAAiB,EACjD,iBAAiB,SAAS,MAAM;AACxC,cAAQ,QAAQ,QAAQ,cACxB,QAAQ,QAAQ,QAAQ,cACxB,QAAQ,cAAc,IAAI,MAAM,OAAO,CAAC,GACxC,QAAQ,cAAc,IAAI,MAAM,OAAO,CAAC;AAAA,IAC1C,CAAC;AAED,QAAM,eAAe,UAAU,iBAAiB,gBAAgB;AAChE,mBAAe,eAAe,aAAa,OAC3C,aAAa,iBAAiB,SAAS,MAAM;AAC3C,qBAAe,eAAe,aAAa;AAAA,IAC7C,CAAC;AAED,QAAM,cAAc,UAAU,gBAAgB,gBAAgB;AAC9D,mBAAe,cAAc,YAAY,OACzC,YAAY,iBAAiB,SAAS,MAAM;AAC1C,qBAAe,cAAc,YAAY;AAAA,IAC3C,CAAC,GAEoB,IAAI,aAAa,EAAE,UAAU,UAAU,cAAc,iBAAiB,EAAE,GAAG,UAAU,SAAS,EACtG,YAAY,CAAC,SAAS;AACjC,qBAAe,WAAW;AAAA,IAC5B,CAAC;AAED,QAAM,sBAAsB,IAAI,oBAAoB,EAAE,YAAY,UAAU,eAAe,gBAAgB,EAAE,CAAC;AAC9G,wBAAoB,kBAAkB,MAAM;AAC1C,qBAAe,QAAQ;AAAA,IACzB,CAAC;AAED,QAAM,qBAAqB,IAAI;AAAA,MAAmC,SAAS;AAAA,MAAiB,UAAU,cAAc;AAAA,MAAG,CAAC,MACtH,SAAS,CAAC;AAAA,IACZ;AACA,mBAAe,UAAU,KAAK,CAAC,WAAW;AACxC,yBAAmB,WAAW,OAAO,QAAQ,OAAO,oBAAoB,OAAO,CAAC;AAAA,IAClF,CAAC,GAGD,SAAS,iBAAiB,UAAU,MAAM;AACxC,eAAS,gBAAgB,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,IAC5D,CAAC;AAAA,EACH;AAEA,WAAS,SAAS,QAA2B;AAC3C,QAAM,KAAK,SAAS,cAAc,IAAI;AAetC,QAdA,GAAG,YAAY;AAAA,MACb,GAAI,OAAO,aACP;AAAA,QACE,gCAAgC,OAAO,WAAW,SAAS,CAAC,8BAA8B,OAAO,WAAW,SAAS,CAAC;AAAA,QACtH,cAAO,OAAO,WAAW,SAAS,CAAC;AAAA,QACnC;AAAA,MACF,IACA,CAAC;AAAA,MACL,oBAAoB,OAAO,IAAI;AAAA,MAC/B,OAAO,oBAAoB;AAAA,MAC3B;AAAA,MACA,UAAU,OAAO,mBAAmB,OAAO,IAAI;AAAA,MAC/C,GAAI,OAAO,iBAAiB,OAAO,cAAc,SAAS,IAAI,CAAC,OAAO,uBAAuB,OAAO,aAAa,GAAG,QAAQ,IAAI,CAAC;AAAA,IACnI,EAAE,KAAK,GAAG,GACN,OAAO,iBAAiB,OAAO,cAAc,SAAS,GAAG;AAC3D,UAAM,WAAW,SAAS,cAAc,IAAI;AAC5C,aAAO,cAAc,QAAQ,CAAC,UAAU;AACtC,YAAI,MAAM,UAAU,OAAW;AAC/B,YAAM,UAAU,SAAS,cAAc,IAAI;AAC3C,gBAAQ,YAAY;AAAA,UAClB,2DAA2D,MAAM,IAAI;AAAA,UACrE,GAAG,MAAM,MAAM,SAAS,CAAC;AAAA,UACzB,MAAM;AAAA,UACN,UAAU,MAAM,eAAe;AAAA,QACjC,EAAE,KAAK,GAAG,GACV,SAAS,YAAY,OAAO;AAAA,MAC9B,CAAC,GACD,GAAG,YAAY,QAAQ;AAAA,IACzB;AACA,WAAO;AAAA,EACT;AAEA,WAAS,uBAAuB,QAAoC;AAClE,WAAO,OAAO,OAAO,CAAC,KAAK,MAAM,OAAO,EAAE,SAAS,IAAI,CAAC;AAAA,EAC1D;AAMA,MAAM,iBAAN,MAAqB;AAAA,IACnB;AAAA,IACA,YAAiE,CAAC;AAAA,IAElE,YAAY,QAA6B;AACvC,WAAK,SAAS,QACd,KAAK,OAAO,iBAAiB,WAAW,CAAC,UAAsC;AAC7E,iBAAW,MAAM,KAAK;AACpB,aAAG,MAAM,IAAI,GAAG,MAAM,UAAU;AAAA,MAEpC,CAAC;AAAA,IACH;AAAA,IAEA,IAAI,QAAQ,GAAa;AACvB,WAAK,OAAO,YAAY,EAAE,KAAK,EAAE,CAAC;AAAA,IACpC;AAAA,IAEA,IAAI,UAAU,OAAoB;AAChC,WAAK,OAAO,YAAY,EAAE,YAAY,MAAM,CAAC;AAAA,IAC/C;AAAA,IAEA,IAAI,aAAa,QAAgB;AAC/B,WAAK,OAAO,YAAY,EAAE,oBAAoB,OAAO,CAAC;AAAA,IACxD;AAAA,IAEA,IAAI,YAAY,QAAgB;AAC9B,WAAK,OAAO,YAAY,EAAE,mBAAmB,OAAO,CAAC;AAAA,IACvD;AAAA,IAEA,IAAI,SAAS,UAAoB;AAC/B,WAAK,OAAO,YAAY,EAAE,SAAS,CAAC;AAAA,IACtC;AAAA,IAEA,UAAU;AACR,WAAK,OAAO,YAAY,CAAC,CAAC;AAAA,IAC5B;AAAA,EACF,GAEM,oBAAoB,kDAEpB,sBAAN,MAA0B;AAAA,IACxB,mBAAmB;AAAA,IACnB,iBAAiC,CAAC;AAAA,IAElC,YAAY,MAAwC;AAClD,WAAK,mBAAmB,KAAK,WAAW,SACxC,KAAK,WAAW,iBAAiB,SAAS,MAAM;AAC9C,aAAK,mBAAmB,KAAK,WAAW,SACxC,KAAK,eAAe,QAAQ,CAAC,OAAO;AAClC,aAAG;AAAA,QACL,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAAA,IAEA,SAAiD;AAC/C,aAAO,CAAC,WACD,KAAK,mBAGH,KAFE,CAAC,kBAAkB,KAAK,OAAO,IAAI;AAAA,IAIhD;AAAA,IAEA,kBAAkB,IAAgB;AAChC,WAAK,eAAe,KAAK,EAAE;AAAA,IAC7B;AAAA,EACF;AAEA,EAAI,SAAS,eAAe,YAC1B,SAAS,iBAAiB,oBAAoB,IAAI,IAElD,KAAK;",
  "names": ["init", "init", "location", "init"]
}
